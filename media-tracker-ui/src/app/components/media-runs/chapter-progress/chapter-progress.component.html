<div class="progress-wrapper">
  <div class="progress-stats">
    <div class="label">
      Lido: <span>{{ readChapters().length }}</span> / {{ totalChapters || '?' }}
    </div>
    @if (totalChapters) {
      <div class="percentage">{{ getProgressPercentage() | number:'1.0-0' }}%</div>
    }
  </div>

  @if (totalChapters) {
    <div class="progress-bar-bg">
      <div class="progress-fill" [style.width.%]="getProgressPercentage()"></div>
    </div>
  }

  <div class="action-buttons">
    <button class="action-btn clear-btn" (click)="clearAll()" title="Desmarcar todos">
      <lucide-icon [img]="ClearIcon" [size]="16"></lucide-icon>
      Limpar
    </button>
    <button class="action-btn watch-all-btn" (click)="readAll()" title="Marcar todos como lidos">
      <lucide-icon [img]="CheckAllIcon" [size]="16"></lucide-icon>
      Marcar Todos
    </button>
  </div>

  <div class="episode-grid">
    @for (ch of getVisibleChapters(); track ch) {
      <button 
        type="button"
        class="episode-item"
        [class.watched]="readChapters().includes(ch)"
        (click)="toggleChapter(ch, $event)"
        [title]="'Capítulo ' + ch + ' (Shift+Click para marcar até aqui)'">
        {{ ch }}
      </button>
    }
  </div>

  @if (getChapterList().length > 24) {
    <button 
      class="show-more-btn" 
      (click)="showAll.set(!showAll())">
      {{ showAll() ? 'Mostrar Menos' : 'Mostrar Todos os Capítulos' }}
    </button>
  }
</div>
