<div class="lists-container">
  <app-list-sidebar
    [selectedFolderId]="(selectedFolderId$ | async)!"
    [folders]="folders$ | async"
    (folderSelect)="selectFolder($event)"
  ></app-list-sidebar>

  <main class="content">
    <app-list-filters
      [availableGenres]="availableGenres()"
      [availableStudios]="availableStudios()"
    ></app-list-filters>

    <header class="content-header">
      <div class="header-left">
        @if (enrichedLists$ | async; as lists) {
          <h2 class="list-count">
            {{ lists.length }} Lists
          </h2>
        }
      </div>
      <div class="header-right">
        <button class="add-list-btn" (click)="openCreateListDialog()">
          <lucide-icon [img]="PlusIcon" [size]="18"></lucide-icon>
          Log a List
        </button>
      </div>
    </header>

    <div class="lists-grid">
      @for (list of enrichedLists$ | async; track list.id) {
        <app-list-card
          [list]="list"
          (cardClick)="onListSaved()" 
        ></app-list-card>
      }

      <!-- Add New List Card -->
      <div class="list-card add-card" (click)="openCreateListDialog()">
        <div class="add-placeholder">
          <lucide-icon [img]="PlusIcon" [size]="48"></lucide-icon>
          <span>Create New List</span>
        </div>
      </div>
    </div>
  </main>
</div>

<app-list-form (saved)="onListSaved()"></app-list-form>
