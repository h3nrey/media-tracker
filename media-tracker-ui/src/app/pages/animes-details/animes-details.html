@if(!isLoading()) {
  <div class="details-page">
    <div class="backdrop-container" [style.background-image]="'url(' + (anime()?.bannerImage || anime()?.coverImage) + ')'">
      <div class="backdrop-gradient"></div>
    </div>

    <div class="page-content">
      <div class="content-layout">
        <app-anime-sidebar 
          [anime]="anime()" 
          [category]="category()" 
          (edit)="onEdit()" 
          (incrementEpisode)="incrementEpisode()"
          (decrementEpisode)="decrementEpisode()"
          (resetEpisodes)="resetEpisodes()"
          (completeEpisodes)="completeEpisodes()"
          (updateScore)="onUpdateScore($event)"
          (saveLinks)="onSaveLinks($event)">
        </app-anime-sidebar>

        <div class="main-column-wrapper">
          <app-anime-info 
            [anime]="anime()" 
            [tagline]="getTagline()">
          </app-anime-info>

          <div class="divider"></div>

          <div class="details-sections">
            <div class="section-group">
              <app-anime-lists [lists]="lists()"></app-anime-lists>
            </div>
            <div class="section-group">
              <app-anime-history 
                [watchDates]="anime()?.watchDates"
                (addLog)="onAddLog()"
                (removeLog)="onRemoveLog($event)"
                (updateLog)="onUpdateLog($event)">
              </app-anime-history>
            </div>
          </div>

          <div class="reviews-wrapper">
            <app-anime-reviews [supabaseId]="anime()?.supabaseId"></app-anime-reviews>
          </div>
        </div>
      </div>
    </div>
  </div>
}
@else {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>Loading details...</p>
  </div>
}
