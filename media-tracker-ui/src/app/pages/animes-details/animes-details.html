@if(!isLoading()) {
  <div class="details-page">
    <div class="backdrop-container" [style.background-image]="'url(' + (anime()?.bannerImage || anime()?.coverImage) + ')'">
      <div class="backdrop-gradient"></div>
    </div>

    <div class="page-content">
      <div class="content-layout">
        <app-anime-sidebar 
          [anime]="anime()" 
          [category]="category()" 
          [categories]="categories()"
          [lists]="lists()"
          (edit)="onEdit()" 
          (incrementEpisode)="incrementEpisode()"
          (decrementEpisode)="decrementEpisode()"
          (resetEpisodes)="resetEpisodes()"
          (completeEpisodes)="completeEpisodes()"
          (updateScore)="onUpdateScore($event)"
          (updateCategory)="onUpdateCategory($event)"
          (saveLinks)="onSaveLinks($event)"
          (listUpdated)="onListUpdated()">
        </app-anime-sidebar>

        <div class="main-column-wrapper">
          <app-anime-info 
            [anime]="anime()" 
            [tagline]="getTagline()">
          </app-anime-info>

          <div class="divider"></div>

          <div class="details-sections">
            <div class="section-group full-width">
              <app-media-runs-list 
                [mediaItemId]="$any(anime()!.id)" 
                [mediaType]="'anime'"
                [totalCount]="anime()?.progressTotal || 0">
              </app-media-runs-list>
            </div>
          </div>

          <div class="reviews-wrapper">
            <app-media-reviews [supabaseId]="anime()?.supabaseId"></app-media-reviews>
          </div>
        </div>
      </div>
    </div>
  </div>
}
@else {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>Loading details...</p>
  </div>
}
